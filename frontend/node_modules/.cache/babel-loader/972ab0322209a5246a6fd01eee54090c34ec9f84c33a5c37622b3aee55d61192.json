{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      form: {\n        district: '',\n        landArea: '',\n        floor: '',\n        totalFloor: '',\n        buildingType: '',\n        years: '',\n        buildingArea: '',\n        bedrooms: '',\n        livingRooms: '',\n        bathrooms: '',\n        partition: '',\n        manager: '',\n        elevator: ''\n      },\n      fetching: false,\n      predictPrice: 0,\n      predicted: false,\n      loadingAnimation: \".\"\n    };\n  },\n  methods: {\n    submitData() {\n      this.predicted = false;\n      if (this.hasEmptyValue(this.form)) {\n        alert('please fill in all fields');\n      } else {\n        this.fetching = true;\n        axios.post('/process', this.form).then(res => {\n          const intervalId = setInterval(() => this.loadingAnimationRun(), 500);\n          setTimeout(() => {\n            this.predictPrice = res.data.price;\n            this.fetching = false;\n            this.predicted = true;\n            clearInterval(intervalId);\n          }, 3000);\n        }).catch(err => {\n          console.log(err);\n          this.fetching = false;\n        });\n      }\n    },\n    hasEmptyValue(obj) {\n      for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          if (obj[key] === '') {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    },\n    loadingAnimationRun() {\n      if (this.loadingAnimation.length < 3) {\n        this.loadingAnimation += '.';\n      } else {\n        this.loadingAnimation = '';\n      }\n    },\n    goPreview() {\n      this.$emit('changePage');\n    }\n  }\n};","map":{"version":3,"names":["axios","data","form","district","landArea","floor","totalFloor","buildingType","years","buildingArea","bedrooms","livingRooms","bathrooms","partition","manager","elevator","fetching","predictPrice","predicted","loadingAnimation","methods","submitData","hasEmptyValue","alert","post","then","res","intervalId","setInterval","loadingAnimationRun","setTimeout","price","clearInterval","catch","err","console","log","obj","key","Object","prototype","hasOwnProperty","call","scrollToTop","window","scrollTo","top","behavior","length","goPreview","$emit"],"sources":["src/components/HousePrice/HousePrice.vue"],"sourcesContent":["<template>\r\n <section class=\"d-flex justify-content-center flex-column align-items-center\">\r\n    <div class=\"main mt-5\" style=\"min-width: 800px;\">\r\n        <div class=\"title\">\r\n            <h1>新北市房價預測系統</h1>\r\n        </div>\r\n            <label for=\"district\">選擇地區：</label>\r\n            <select name=\"district\" v-model=\"form.district\">\r\n                <option value=\"新莊區\">新莊區</option>\r\n                <option value=\"中和區\">中和區</option>\r\n                <option value=\"汐止區\">汐止區</option>\r\n                <option value=\"土城區\">土城區</option>\r\n                <option value=\"三芝區\">三芝區</option>\r\n                <option value=\"板橋區\">板橋區</option>\r\n                <option value=\"淡水區\">淡水區</option>\r\n                <option value=\"五股區\">五股區</option>\r\n                <option value=\"三重區\">三重區</option>\r\n                <option value=\"林口區\">林口區</option>\r\n                <option value=\"樹林區\">樹林區</option>\r\n                <option value=\"貢寮區\">貢寮區</option>\r\n                <option value=\"新店區\">新店區</option>\r\n                <option value=\"八里區\">八里區</option>\r\n                <option value=\"永和區\">永和區</option>\r\n                <option value=\"泰山區\">泰山區</option>\r\n                <option value=\"三峽區\">三峽區</option>\r\n                <option value=\"鶯歌區\">鶯歌區</option>\r\n                <option value=\"蘆洲區\">蘆洲區</option>\r\n                <option value=\"金山區\">金山區</option>\r\n                <option value=\"深坑區\">深坑區</option>\r\n                <option value=\"萬里區\">萬里區</option>\r\n                <option value=\"雙溪區\">雙溪區</option>\r\n                <option value=\"石門區\">石門區</option>\r\n                <option value=\"瑞芳區\">瑞芳區</option>\r\n            </select>\r\n            <label for=\"land-area\" >土地總面積平方公尺：</label>\r\n            <input type=\"number\" min=\"0\" name=\"land-area\" id=\"land-area\" required v-model=\"form.landArea\">\r\n            <label for=\"floor\">樓層：</label>\r\n            <input type=\"number\" min=\"0\" name=\"floor\" id=\"floor\" required v-model=\"form.floor\">\r\n            <label for=\"total-floor\">建築物總樓層：</label>\r\n            <input type=\"number\" min=\"1\" name=\"total-floor\" id=\"total-floor\" required v-model=\"form.totalFloor\">\r\n            <label for=\"building-type\">建築類型：</label>\r\n            <select name=\"building-type\" id=\"building-type\" v-model=\"form.buildingType\">\r\n                <option value=\"公寓(5樓含以下無電梯)\">公寓(5樓含以下無電梯)</option>\r\n                <option value=\"華廈(10層含以下有電梯)\">華廈(10層含以下有電梯)</option>\r\n                <option value=\"住宅大樓(11層含以上有電梯)\">住宅大樓(11層含以上有電梯)</option>\r\n                <option value=\"其他\">其他</option>\r\n            </select>\r\n            <label for=\"years\">屋齡：</label>\r\n            <input type=\"number\" min=\"0\" name=\"years\" id=\"years\" required v-model=\"form.years\">\r\n            <label for=\"building-area\" >建物總面積平方公尺：</label>\r\n            <input type=\"number\" min=\"1\" name=\"building-area\" id=\"building-area\" required v-model=\"form.buildingArea\">\r\n            <label for=\"bedrooms\">幾房：</label>\r\n            <input type=\"number\" min=\"0\" name=\"bedrooms\" id=\"bedrooms\" required v-model=\"form.bedrooms\">\r\n\r\n            <label for=\"living-rooms\">幾廳：</label>\r\n            <input type=\"number\" min=\"0\" name=\"living-rooms\" id=\"living-rooms\" required v-model=\"form.livingRooms\">\r\n\r\n            <label for=\"bathrooms\">幾衛：</label>\r\n            <input type=\"number\" min=\"0\" name=\"bathrooms\" id=\"bathrooms\" required v-model=\"form.bathrooms\">\r\n            <label for=\"partition\">是否有隔間：</label>\r\n            <select name=\"partition\" id=\"partition\" v-model=\"form.partition\">\r\n            <option value=\"有\">有</option>\r\n            <option value=\"無\">無</option>\r\n            </select>\r\n            <label for=\"manager\">是否有管理員：</label>\r\n            <select name=\"manager\" id=\"manager\" v-model=\"form.manager\">\r\n            <option value=\"有\">有</option>\r\n            <option value=\"無\">無</option>\r\n            </select>\r\n\r\n            <label for=\"elevator\">是否有電梯：</label>\r\n            <select name=\"elevator\" id=\"elevator\" v-model=\"form.elevator\">\r\n            <option value=\"有\">有</option>\r\n            <option value=\"無\">無</option>\r\n            </select>\r\n            <div class=\"but d-flex justify-content-center align-items-center\" style=\"height: 100px;\">\r\n                <button @click=\"submitData\" class=\"w-25 fs-3 btn btn-outline-secondary\">提交</button>\r\n            </div>\r\n            \r\n    </div>\r\n    <div \r\n        class=\"position-fixed top-50 start-50 translate-middle border pt-4 bg-white rounded-3 border-dark-subtle z-3\"\r\n        v-if=\"fetching || predicted\"\r\n    >   \r\n        <div v-if=\"fetching\" class=\"box d-flex flex-column justify-content-center\">\r\n            <h2 class=\"text-center\">Loading <span>{{ loadingAnimation }}</span></h2>\r\n        </div>\r\n        <div v-if=\"predicted || !fetching\" class=\"box d-flex flex-column justify-content-between align-item-center\" >\r\n            <h2 class=\"text-center fs-1 fw-bold\">預測價格</h2>\r\n            <h1>{{ predictPrice }}</h1>\r\n            <button type=\"button\" class=\"btn btn-light\" @click=\"predicted = false\">Close</button>\r\n        </div>\r\n    </div>\r\n    <div v-if=\"predicted || fetching\" class=\"overlay\" @click=\"predicted = false\"></div>\r\n    <button\r\n        @click=\"goPreview\" \r\n        type=\"button\" class=\"btn btn-light position-fixed bottom-0 start-0 fs-4\"><i class=\"bi bi-chevron-double-left\"></i>介紹</button>\r\n </section>\r\n    \r\n    \r\n \r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    data(){\r\n        return{\r\n            form: {\r\n                district: '',\r\n                landArea: '',\r\n                floor: '',\r\n                totalFloor: '',\r\n                buildingType: '',\r\n                years: '',\r\n                buildingArea: '',\r\n                bedrooms: '',\r\n                livingRooms: '',\r\n                bathrooms: '',\r\n                partition: '',\r\n                manager: '',\r\n                elevator: '',\r\n            },\r\n            fetching: false,\r\n            predictPrice: 0,\r\n            predicted:false,\r\n            loadingAnimation:\".\"\r\n        }\r\n\r\n    },\r\n    methods:{\r\n        submitData(){\r\n            this.predicted = false; \r\n            if (this.hasEmptyValue(this.form)){\r\n                alert('please fill in all fields')\r\n            }else {\r\n                this.fetching = true;\r\n                axios.post('/process',this.form)\r\n                .then(res => {\r\n                    const intervalId = setInterval(() => this.loadingAnimationRun(), 500);\r\n                    setTimeout(()=>{\r\n                        this.predictPrice = res.data.price\r\n                    this.fetching = false\r\n                    this.predicted = true\r\n                    clearInterval(intervalId);\r\n                    },3000)\r\n                    \r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                    this.fetching = false;\r\n                })\r\n            }\r\n        },\r\n        hasEmptyValue(obj){\r\n            for (const key in obj){\r\n                if(Object.prototype.hasOwnProperty.call(obj, key)){\r\n                    if(obj[key] === ''){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        scrollToTop(){\r\n                window.scrollTo({\r\n                top: 0,\r\n                behavior: 'smooth'\r\n            });\r\n        },\r\n        loadingAnimationRun(){\r\n            if(this.loadingAnimation.length < 3){\r\n                this.loadingAnimation += '.';\r\n            }else{\r\n                this.loadingAnimation = '';\r\n            }\r\n            \r\n        },\r\n        goPreview(){\r\n            this.$emit('changePage')\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n        .overlay {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.5);\r\n            \r\n        }\r\n        .box {\r\n            width: 350px;\r\n            height: 300px;\r\n        }\r\n        form {\r\n            max-width: 400px;\r\n            margin: 0 auto;\r\n            \r\n        }\r\n\r\n        label {\r\n            display: block;\r\n            margin-bottom: 5px;\r\n            font-weight: bold;\r\n        }\r\n\r\n        select,\r\n        input[type=\"number\"] {\r\n            width: 100%;\r\n            padding: 5px;\r\n            margin-bottom: 10px;\r\n        }\r\n\r\n        input[type=\"submit\"] {\r\n            background-color: #4CAF50;\r\n            color: white;\r\n            padding: 10px 15px;\r\n            border: none;\r\n            cursor: pointer;\r\n            align-self: center;\r\n            margin-top: 20px;\r\n            width: 100%;\r\n        }\r\n        h1 {\r\n            text-align: center;\r\n        }\r\n        \r\n</style>"],"mappings":"AAwGA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,KAAA;QACAC,UAAA;QACAC,YAAA;QACAC,KAAA;QACAC,YAAA;QACAC,QAAA;QACAC,WAAA;QACAC,SAAA;QACAC,SAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,QAAA;MACAC,YAAA;MACAC,SAAA;MACAC,gBAAA;IACA;EAEA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAH,SAAA;MACA,SAAAI,aAAA,MAAApB,IAAA;QACAqB,KAAA;MACA;QACA,KAAAP,QAAA;QACAhB,KAAA,CAAAwB,IAAA,kBAAAtB,IAAA,EACAuB,IAAA,CAAAC,GAAA;UACA,MAAAC,UAAA,GAAAC,WAAA,YAAAC,mBAAA;UACAC,UAAA;YACA,KAAAb,YAAA,GAAAS,GAAA,CAAAzB,IAAA,CAAA8B,KAAA;YACA,KAAAf,QAAA;YACA,KAAAE,SAAA;YACAc,aAAA,CAAAL,UAAA;UACA;QAEA,GACAM,KAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;UACA,KAAAlB,QAAA;QACA;MACA;IACA;IACAM,cAAAe,GAAA;MACA,WAAAC,GAAA,IAAAD,GAAA;QACA,IAAAE,MAAA,CAAAC,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAL,GAAA,EAAAC,GAAA;UACA,IAAAD,GAAA,CAAAC,GAAA;YACA;UACA;QACA;MACA;MACA;IACA;IACAK,YAAA;MACAC,MAAA,CAAAC,QAAA;QACAC,GAAA;QACAC,QAAA;MACA;IACA;IACAlB,oBAAA;MACA,SAAAV,gBAAA,CAAA6B,MAAA;QACA,KAAA7B,gBAAA;MACA;QACA,KAAAA,gBAAA;MACA;IAEA;IACA8B,UAAA;MACA,KAAAC,KAAA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}